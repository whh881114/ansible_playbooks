global:
  resolve_timeout: 5m
  smtp_smarthost: "smtp.163.com:465"
  smtp_from: "roy_wong_20210324@163.com"
  smtp_auth_username: "roy_wong_20210324@163.com"
  smtp_auth_password: "OMWHCYLVIXUOONVZ"
  smtp_require_tls: false

templates:
  - "[[ alertmanager_template_dir ]]/email.tmpl"

route:
  group_by: ["alertname"]
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 10m
  receiver: "email"

receivers:
  - name: "email"
    email_configs:
      - send_resolved: true
        to: "roy_wong_20210324@163.com"
        html: '{{ template "email.html" . }}'
        headers: { Subject: "{{ .GroupLabels.SortedPairs.values }} [{{ .Status | toUpper}}:{{ .Alerts.Firing | len }}]" }

inhibit_rules:
  - source_match:
      severity: "critical"
    target_match:
      severity: "warning"
    equal: ['alertname', 'dev', 'instance']